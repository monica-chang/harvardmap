<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- documentation at http://getbootstrap.com/docs/4.1/, alternative themes at https://bootswatch.com/ -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">


  <title>Marauder's Map: Harvard Edition - Interactive Map</title>
  <style type="text/css">
    #map_canvas {
    height: 100%;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCp-cZG1SpG8R_ScIiLvgDa-rTtMM6B0Eg"></script>
  <script>
      var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789';
      var labelIndex = 0;

      var markers = [
          ['Smith Center', 42.3727 , -71.1186, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Smith Center'") }}],
          ['Apley Court', 42.3724, -71.1181, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Apley Court'") }}],
          ['Canaday Hall', 42.3753 , -71.1159, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Canaday'") }}],
          ['Grays Hall', 42.3736 , -71.1178, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Grays'") }}],
          ['Greenough Hall', 42.3729 , -71.1138, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Greenough'") }}],
          ['Hollis Hall', 42.3750, -71.1179, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Hollis'") }}],
          ['Holworthy Hall', 42.3755 , -71.1172, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Holworthy'") }}],
          ['Hurlbut Hall', 42.3721 , -71.1139, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Hurlbut'") }}],
          ['Lionel Hall', 42.3751 , -71.1184, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Lionel'") }}],
          ['Mower Hall', 42.3755 , -71.1182, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Mower'") }}],
          ['Mass Hall', 42.3744, -71.1183, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Mass Hall'") }}],
          ['Matthews Hall', 42.3741, -71.1181, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Matthews'") }}],
          ['Stoughton Hall', 42.3754 , -71.1177, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Stoughton'") }}],
          ['Straus Hall', 42.3741, -71.1186, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Straus'") }}],
          ['Thayer Hall', 42.3750 , -71.1167, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Thayer'") }}],
          ['Weld Hall', 42.3739 , -71.1171, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Weld'") }}],
          ['Wigg Hall', 42.3731 , -71.1171, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Wigglesworth'") }}],
          ['Adams House', 42.3717 , -71.1167, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Adams'") }}],
          ['Cabot House', 42.3812 , -71.1247, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Cabot'") }}],
          ['Currier House', 42.3818, -71.1255, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Currier'") }}],
          ['Dunster House', 42.3686, -71.1158, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Dunster'") }}],
          ['Eliot House', 42.3703, -71.1209, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Eliot'") }}],
          ['Kirkland House', 42.3708 , -71.1205, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Kirkland'") }}],
          ['Leverett House', 42.3701, -71.1174, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Leverett'") }}],
          ['Lowell House', 42.3720 , -71.1181, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Lowell'") }}],
          ['Mather House', 42.3686, -71.1153, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Mather'") }}],
          ['Pforzheimer House', 42.3821 , -71.1248, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Pforzheimer'") }}],
          ['Quincy House', 42.3705, -71.1174, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Quincy'") }}],
          ['Winthrop House', 42.3702,  -71.1191, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Winthrop'") }}],
          ['Cabot Library', 42.3762 , -71.1162, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Cabot'") }}],
          ['Law School Library', 42.3780 , -71.1186, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Langdell Law School Library'") }}],
          ['Lamont Library', 42.3727, -71.1155, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Lamont'") }}],
          ['Widener Library', 42.3734, -71.1165, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Widener'") }}],
          ['Capital One Cafe', 42.3727, -71.1197, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Capital One'") }}],
          ['Flour Bakery', 42.3730 , -71.1225, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Flour'") }}],
          ['Peets Cafe', 42.3726 , -71.1206, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Peet's'") }}],
          ['Starbucks', 42.3733 , -71.1192, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Starbucks'") }}],
          ['Tatte Bakery and Cafe', 42.3727 , -71.1170, {{ db.execute("SELECT numpeople FROM locations WHERE location = 'Tatte'") }}]
        ];

        function setMarkers(map, markers) {
          var marker, i
          for (i = 0; i < markers.length; i++) {
            var lat = markers[i][1]
            var long = markers[i][2]
            var inside = markers[i][0]
            var num = markers[i][4]                                  

            latlngset = new google.maps.LatLng(lat, long);
            var marker = new google.maps.Marker({
              position: latlngset,
              label: labels[i],
              map: map,
              title: inside
            });

            var content = inside + num 

            var infowindow = new google.maps.InfoWindow()
            google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){
                        return function() {
                        infowindow.setContent(content);
                        infowindow.open(map,marker);
                        };
                        })(marker,content,infowindow));
            }
         }

        function initialize() {
            var myOptions = {
              center: new google.maps.LatLng(42.3744, -71.1162),
              zoom: 15,
              };
            var map = new google.maps.Map(document.getElementById("default"),
              myOptions);
            setMarkers(map, markers)
        }


         google.maps.event.addDomListener(window, 'load', initialize);
    </script>

  <script>
  $(function() {
    $( "p" ).text( "The DOM is now loaded and can be manipulated." );
  });
  </script>

</head>

<div id="map"></div>
<!-- Replace the value of the key parameter with your own API key. -->

<body onload="initialize()">
  <nav class="navbar navbar-expand-md navbar-light bg-light border">
            <a class="navbar-brand" href="/"><span class="blue">Marauder's Map @ Harvard</span>
            <button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar" data-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar">
                {% if userinfo %}
                    <ul class="navbar-nav mr-auto mt-2">
                        <li class="nav-item"><a class="nav-link" href="/map">Map</a></li>
                        <li class="nav-item"><a class="nav-link" href="/check">Check In/Out</a></li>
                        <li class="nav-item"><a class="nav-link" href="/friends">Find My Friends</a></li>
                    </ul>
                    <ul class="navbar-nav ml-auto mt-2">
                        <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                    </ul>
                {% else %}
                    <ul class="navbar-nav ml-auto mt-2">
                        <li class="nav-item"><a class="nav-link" href="/login">Log In</a></li>
                    </ul>
                {% endif %}
            </div>
        </nav>
<div id="default" style="width:100%; height:100%"></div>
</body>

</html>






